function pixelGlass(){"use strict";function f(){d(),F(),"on"===h.state&&T()}function d(){var s=t.documentElement;if(C(t.body,"has-sticky-point")){var o=t.querySelector(".sticky-point");o&&!localStorage["pg-released"]&&(s=o),h.state="off"}i=t.createElement("div"),i.classList.add(e),s.appendChild(i);var r=["top","right","bottom","left"];r.forEach(function(t){var s=x(t,"");s&&(i.style[t]=s)}),u()}function u(){m(c),m(p),g(_),v()}function m(s){var a=(s.listName,s.itemName),n=s.elemTag,l=s.elemText,c=s.type,p=s.list,f=(s.action,h[a]),d=s.attrs,u=p.indexOf(f),m=s.canDisableAll,g=a,v=t.createElement(n);if(P(v,[e+"__control",e+"__control--"+c]),v.setAttribute("type",c),v.setAttribute("id",g),S(v,"state-num",u),d)for(var x in d)v.setAttribute(x,d[x]);"button"===n&&(v.innerHTML=l),m||o.push(v),i.appendChild(v),v.onclick=function(){s.target&&(u=+!u,f=p[u],S(v,"state-num",u),S(s.target.elem,a,f),$(a,f),m&&m===!0&&("off"===f?(M(),b()):(T(),y())))}}function g(s){var r=s.itemName,a=s.attrs,n=s.type,l=s.setAttr,c=s.canDisableAll,p=r,_=t.createElement("input");P(_,[e+"__control",e+"__control--"+n]),_.setAttribute("type",n),_.setAttribute("id",p);for(var f in a)_.setAttribute(f,a[f]);_.setAttribute("value",h[r]),c||o.push(_),i.appendChild(_),_.oninput=function(){"style"===l&&(s.target.elem.style[r]=this.value,$(r,this.value))}}function v(){var s=t.createElement("button");P(s,[e+"__control",e+"__control--drag-n-drop"]),s.setAttribute("type","button"),s.innerHTML=" ",i.appendChild(s),s.onmousedown=function(){var e=(this.offsetTop,i.clientWidth-this.clientWidth),o=getComputedStyle(i);i.style.top=o.top,i.style.left=o.left,i.style.right="auto",i.style.bottom="auto",t.onmousemove=function(t){var s=t.clientX-e+"px",o=t.clientY+"px";i.style.left=s,i.style.top=o}},s.onmouseup=function(){var s=getComputedStyle(i),e=+s.left.replace(/px/,""),o=+s.right.replace(/px/,""),r=+s.top.replace(/px/,""),a=+s.bottom.replace(/px/,"");e>o?($("left","auto"),$("right",s.right),i.style.right=s.right,i.style.left="auto"):($("left",s.left),$("right","auto")),r>a?($("top","auto"),$("bottom",s.bottom),i.style.bottom=s.bottom,i.style.top="auto"):($("top",s.top),$("bottom","auto")),t.onmousemove=null}}function b(){o.forEach(function(t){t.setAttribute("disabled","")})}function y(){o.forEach(function(t){t.removeAttribute("disabled")})}function x(t,i){var s=[r,t].join("-"),e=localStorage[s];return e?e:i}function $(t,i){var s=[r,t].join("-");localStorage[s]=i}function F(){for(var t in l){var i=l[t],s=h[t];"data"===i.attr&&S(i.elem,t,s)}"off"===h.state&&b()}function T(){for(var t in l){var i=l[t],s=h[t];"style"===i.attr&&(i.elem.style[t]=s)}}function M(){for(var t in l){var i=l[t];"style"===i.attr&&(i.elem.style[t]="")}}function C(t,i){return t?(i="data-"+i,void 0!==t.getAttribute(i)&&null!==t.getAttribute(i)?!0:!1):!1}function S(t,i,s){t&&(i="data-"+i,t.setAttribute(i,s))}function P(t,i){t&&i.length>0&&i.forEach(function(i){t.classList.add(i)})}var i,t=document,e="controls-panel",o=[],r="pg",a=["none","invert"],n=["off","on"],h={state:x("state",n[1]),filter:x("filter",a[0]),opacity:x("opacity",.5)},l={state:{elem:t.documentElement,attr:"data"},filter:{elem:t.body,attr:"data"},opacity:{elem:t.body,attr:"style"}},c={elemTag:"button",elemText:"on",listName:"states",itemName:"state",target:l.state,type:"button",list:n,canDisableAll:!0,attrs:{tabindex:1}},p={elemTag:"button",elemText:"invert",listName:"filters",itemName:"filter",target:l.filter,type:"button",list:a,attrs:{tabindex:2}},_={itemName:"opacity",type:"number",target:l.opacity,setAttr:"style",attrs:{min:0,max:1,step:.1,tabindex:3}};f()}window.onload=function(){pixelGlass()};